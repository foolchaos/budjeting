# Budget Requests App

Технологии: Java 21, Spring Boot 3.3, Vaadin 24, PostgreSQL, Maven, Docker.

## Запуск (Docker, production режим Vaadin)
```bash
docker compose up --build
```
Приложение будет доступно на http://localhost:8080

## Локальный запуск (dev)
1) Запустить PostgreSQL (например, через Docker) и выставить переменные окружения `APP_DB_URL`, `APP_DB_USER`, `APP_DB_PASS` при необходимости.
2) Запуск:
```bash
./mvnw spring-boot:run
```
или
```bash
mvn spring-boot:run
```

## Сборка prod-jar c фронтендом Vaadin
```bash
mvn -Pproduction clean package
```
Получится `target/budget-vaadin-app-0.1.0.jar`.

## Учет требований (кратко)
- Вкладки «Справочники» и «Заявки» (по умолчанию открыта «Справочники»).
- БДЗ: TreeGrid c чекбоксами у каждого узла, карточка сущности, CRUD.
- Прочие справочники: Grid + карточка сущности, CRUD, групповое удаление.
- «Заявки»: таблица с заданными колонками и фильтрами; карточка; мастер создания (3 шага).
- Каскадные удаления и «отвязка» заявок реализованы в сервисах удаления.

## Импорт статей БДЗ из Excel
- Поддерживается импорт из файлов формата XLSX (Excel 2007+). Размер файла — не более 10 МБ, количество строк с данными — не более 10 000.
- Используется первый лист книги. Первая строка должна содержать заголовки ровно в таком порядке: `Код`, `Наименование`, `Родительский код`.
- Каждая последующая строка описывает одну запись. Поля «Код» и «Наименование» обязательны. Поле «Родительский код» может быть пустым либо ссылаться на существующий код (как уже сохранённый в базе, так и заданный в текущем файле).
- Коды в файле должны быть уникальными. При совпадении кода с существующей записью обновляются название и родитель.

| Колонка            | Тип / формат | Обязательность | Правила заполнения |
|--------------------|--------------|----------------|--------------------|
| `Код`              | Текст        | Да             | Уникальное значение (буквы/цифры), до 255 символов. |
| `Наименование`     | Текст        | Да             | Отображаемое имя статьи, до 1 000 символов. |
| `Родительский код` | Текст        | Нет            | Пусто для корневых записей либо код родителя, присутствующий в базе или в текущем файле. |

Минимальный пример содержимого файла (показан в табличном виде):

| Код  | Наименование | Родительский код |
|------|--------------|------------------|
| 1000 | Доходы       |                  |
| 1001 | Зарплата     | 1000             |
