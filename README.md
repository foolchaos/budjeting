# Budget Requests App

Технологии: Java 21, Spring Boot 3.3, Vaadin 24, PostgreSQL, Maven, Docker.

## Запуск (Docker, production режим Vaadin)
```bash
docker compose up --build
```
Приложение будет доступно на http://localhost:8080

## Локальный запуск (dev)
1) Запустить PostgreSQL (например, через Docker) и выставить переменные окружения `APP_DB_URL`, `APP_DB_USER`, `APP_DB_PASS` при необходимости.
2) Запуск:
```bash
./mvnw spring-boot:run
```
или
```bash
mvn spring-boot:run
```

## Сборка prod-jar c фронтендом Vaadin
```bash
mvn -Pproduction clean package
```
Получится `target/budget-vaadin-app-0.1.0.jar`.

## Учет требований (кратко)
- Вкладки «Справочники» и «Заявки» (по умолчанию открыта «Справочники»).
- БДЗ: TreeGrid c чекбоксами у каждого узла, карточка сущности, CRUD.
- Прочие справочники: Grid + карточка сущности, CRUD, групповое удаление.
- «Заявки»: таблица с заданными колонками и фильтрами; карточка; мастер создания (3 шага).
- Каскадные удаления и «отвязка» заявок реализованы в сервисах удаления.

## Импорт ЦФО I из Excel
В разделе «Справочники» → «ЦФО I» доступна кнопка **Импорт**. Поддерживается загрузка файлов в формате `.xlsx`
со следующими ограничениями:

- размер файла — не более 10 МБ;
- не более 50 000 строк данных (заголовок не учитывается);
- обрабатывается только первый лист книги.

Структура листа строго фиксирована: первая строка — заголовок из двух столбцов «Код» и «Наименование»,
далее идут строки с данными. Код используется как уникальный идентификатор, поэтому при повторном импорте
с тем же кодом запись обновляется. Пустые строки допускаются и пропускаются. Пример содержимого файла:

| Код  | Наименование     |
|------|------------------|
| 1001 | Дирекция         |
| 1002 | Сбыт             |
| 2005 | Производство №1 |

Файл можно формировать как в Excel, так и в любом редакторе электронных таблиц, главное — сохранить его
в формате `.xlsx` с указанной структурой.
